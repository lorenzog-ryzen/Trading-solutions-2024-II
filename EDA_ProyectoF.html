
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exploratory Data Analysis &#8212; Trading-solutions-2024-II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'EDA_ProyectoF';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usual Models" href="Modelos_PF.html" />
    <link rel="prev" title="Introduction to the Machine Learning Project" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpeg" class="logo__image only-light" alt="Trading-solutions-2024-II - Home"/>
    <script>document.write(`<img src="_static/logo.jpeg" class="logo__image only-dark" alt="Trading-solutions-2024-II - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction to the Machine Learning Project
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Exploratory Data Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modelos_PF.html">Usual Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="Theorical_explanation.html">Theorical Explanation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Borrador_NEAT.html">Algorithms</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FEDA_ProyectoF.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/EDA_ProyectoF.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exploratory Data Analysis</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective-of-the-eda">Objective of the EDA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-the-trading-dataframe">Description of the Trading DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-analysis">DataFrame Analysis</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#number-of-rows-1-223-313"><strong>Number of Rows:</strong> 1,223,313</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#columns"><strong>Columns:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#date-conversion">Date Conversion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hourly-interval-analysis">Hourly Interval Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exact-time-analysis">Exact Time Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bid-price-analysis">Bid Price Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ask-price-analysis">Ask Price Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bid-volume-analysis">Bid Volume Analysis</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#na-s">NA’S</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correlation">Correlation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-analysis-of-precio-bid">Time Series Analysis of “precio_bid”</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#q-q-plot">Q-Q plot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolmogorov-smirnov-ks-test">Kolmogorov-Smirnov (KS) Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-to-the-case-study">Reference to the Case Study</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling">Resampling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-autocorrelation-and-partial-autocorrelation-graphs">Analysis of Autocorrelation and Partial Autocorrelation Graphs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analytical-method-augmented-dickey-fuller-test-adf"><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#differencing-application">Differencing Application</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#autocorrelation-and-partial-autocorrelation">Autocorrelation and Partial Autocorrelation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exploratory-data-analysis">
<h1>Exploratory Data Analysis<a class="headerlink" href="#exploratory-data-analysis" title="Link to this heading">#</a></h1>
<p>The exploratory data analysis (EDA) stage is crucial for understanding the details of time series in trading, especially in the context of forex. In this study, we focus on the EUR/USD currency pair, which represents the value of the euro in terms of US dollars. This currency pair is highly relevant in international markets due to its high liquidity and the economic stability of the economies involved.</p>
<section id="objective-of-the-eda">
<h2>Objective of the EDA<a class="headerlink" href="#objective-of-the-eda" title="Link to this heading">#</a></h2>
<p>The main objective of this EDA is to thoroughly analyze how the EUR/USD bid price fluctuates on a specific date: September 26, 2022. We aim to understand price movements during that day to gain valuable insights into the behavior on this particular date. Key aspects we will address include:</p>
<ol class="arabic simple">
<li><p><strong>Price Variations Throughout the Day</strong>: Examine the fluctuations in the EUR/USD price during the selected day to identify intraday behavior patterns and significant price changes.</p></li>
<li><p><strong>Trend and Volatility Analysis</strong>: Assess the price volatility and trends throughout the day to better understand how the price changes at different times.</p></li>
<li><p><strong>Data Visualization</strong>: Use graphical tools to represent price variations and other relevant indicators, making data interpretation and analysis easier.</p></li>
<li><p><strong>Anomaly Detection</strong>: Identify any anomalies or unusual events in the price behavior that may have occurred during the day.</p></li>
</ol>
<p>In the following analysis, we will explore the EUR/USD dataset for September 26, 2022, aiming to get a clear view of the price movements on that day.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.stattools</span> <span class="kn">import</span> <span class="n">adfuller</span>
<span class="kn">from</span> <span class="nn">statsmodels.graphics.tsaplots</span> <span class="kn">import</span> <span class="n">plot_acf</span><span class="p">,</span> <span class="n">plot_pacf</span>
<span class="kn">from</span> <span class="nn">statsmodels.graphics.gofplots</span> <span class="kn">import</span> <span class="n">qqplot</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;/content/26-09-2022.txt&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dftra</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">dftra</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;/content/26-09-2022.txt&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="nb">print</span><span class="p">(</span><span class="n">dftra</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="nn">File ~\miniconda3\envs\venv_py\lib\site-packages\pandas\io\parsers\readers.py:948,</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, date_format, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options, dtype_backend)</span>
<span class="g g-Whitespace">    </span><span class="mi">935</span> <span class="n">kwds_defaults</span> <span class="o">=</span> <span class="n">_refine_defaults_read</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">936</span>     <span class="n">dialect</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">937</span>     <span class="n">delimiter</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">944</span>     <span class="n">dtype_backend</span><span class="o">=</span><span class="n">dtype_backend</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">945</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">946</span> <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">948</span> <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

<span class="nn">File ~\miniconda3\envs\venv_py\lib\site-packages\pandas\io\parsers\readers.py:611,</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">608</span> <span class="n">_validate_names</span><span class="p">(</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">610</span> <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">611</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">613</span> <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">614</span>     <span class="k">return</span> <span class="n">parser</span>

<span class="nn">File ~\miniconda3\envs\venv_py\lib\site-packages\pandas\io\parsers\readers.py:1448,</span> in <span class="ni">TextFileReader.__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">   </span><span class="mi">1445</span>     <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1447</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="p">:</span> <span class="n">IOHandles</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="ne">-&gt; </span><span class="mi">1448</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

<span class="nn">File ~\miniconda3\envs\venv_py\lib\site-packages\pandas\io\parsers\readers.py:1705,</span> in <span class="ni">TextFileReader._make_engine</span><span class="nt">(self, f, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1703</span>     <span class="k">if</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mode</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1704</span>         <span class="n">mode</span> <span class="o">+=</span> <span class="s2">&quot;b&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1705</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="o">=</span> <span class="n">get_handle</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1706</span>     <span class="n">f</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1707</span>     <span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1708</span>     <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1709</span>     <span class="n">compression</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compression&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1710</span>     <span class="n">memory_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory_map&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1711</span>     <span class="n">is_text</span><span class="o">=</span><span class="n">is_text</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1712</span>     <span class="n">errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1713</span>     <span class="n">storage_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;storage_options&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1714</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1715</span> <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">   </span><span class="mi">1716</span> <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="o">.</span><span class="n">handle</span>

<span class="nn">File ~\miniconda3\envs\venv_py\lib\site-packages\pandas\io\common.py:863,</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">858</span> <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">859</span>     <span class="c1"># Check whether the filename is to be opened in binary mode.</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span>     <span class="c1"># Binary mode does not support &#39;encoding&#39; and &#39;newline&#39;.</span>
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="k">if</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">and</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">862</span>         <span class="c1"># Encoding</span>
<span class="ne">--&gt; </span><span class="mi">863</span>         <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">864</span>             <span class="n">handle</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">865</span>             <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">866</span>             <span class="n">encoding</span><span class="o">=</span><span class="n">ioargs</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">867</span>             <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">868</span>             <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">869</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">870</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">871</span>         <span class="c1"># Binary mode</span>
<span class="g g-Whitespace">    </span><span class="mi">872</span>         <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;/content/26-09-2022.txt&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="description-of-the-trading-dataframe">
<h2>Description of the Trading DataFrame<a class="headerlink" href="#description-of-the-trading-dataframe" title="Link to this heading">#</a></h2>
<p>This DataFrame contains transaction records for the EUR/USD currency trading on September 26, 2022, with the following columns:</p>
<ul class="simple">
<li><p><strong>fecha</strong>: Transaction date. All records correspond to September 26, 2022, including hour, minutes, and seconds.</p></li>
<li><p><strong>hora_exacta</strong>: Exact transaction time with nanosecond precision. The records have timestamps in the same fraction of a second (e.g., 00:00:00.033 and 00:00:00.045).</p></li>
<li><p><strong>precio_bid</strong>: Bid price for each transaction.</p></li>
<li><p><strong>volumen_bid</strong>: Volume associated with the bid price. It varies between transactions.</p></li>
<li><p><strong>precio_ask</strong>: Ask price.</p></li>
<li><p><strong>volumen_ask</strong>: Volume associated with the ask price.</p></li>
<li><p><strong>instrumento_EUR/USD</strong>: Related to the EUR/USD instrument.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num_filas</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Número de filas:&quot;</span><span class="p">,</span> <span class="n">num_filas</span><span class="p">)</span>

<span class="n">nombres_columnas</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">columns</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nombres de las columnas:&quot;</span><span class="p">,</span> <span class="n">nombres_columnas</span><span class="p">)</span>

<span class="n">resumen_dftra</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Resumen del DataFrame:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resumen_dftra</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Número de filas: 1223313
Nombres de las columnas: Index([&#39;fecha&#39;, &#39; hora_exacta&#39;, &#39;precio_bid&#39;, &#39; volumen_bid&#39;, &#39; precio_ask&#39;,
       &#39; volumen_ask&#39;, &#39; instrumento_EUR/USD&#39;],
      dtype=&#39;object&#39;)
Resumen del DataFrame:
                     fecha   hora_exacta    precio_bid   volumen_bid  \
count              1223313  1.223313e+06  1.223313e+06  1.223313e+06   
unique              500630           NaN           NaN           NaN   
top     05:14:18.132000000           NaN           NaN           NaN   
freq                    45           NaN           NaN           NaN   
mean                   NaN  9.704096e-01  1.862888e+01  9.705178e-01   
std                    NaN  2.460179e-03  1.206868e+01  2.460008e-03   
min                    NaN  9.642000e-01  1.000000e+00  9.643000e-01   
25%                    NaN  9.684000e-01  7.000000e+00  9.685000e-01   
50%                    NaN  9.703000e-01  1.800000e+01  9.704000e-01   
75%                    NaN  9.723000e-01  2.900000e+01  9.724000e-01   
max                    NaN  9.761000e-01  4.890000e+02  9.762000e-01   

          precio_ask  volumen_ask   instrumento_EUR/USD  
count   1.223313e+06      1223313                   0.0  
unique           NaN            1                   NaN  
top              NaN            E                   NaN  
freq             NaN      1223313                   NaN  
mean    1.839161e+01          NaN                   NaN  
std     1.192818e+01          NaN                   NaN  
min     1.000000e+00          NaN                   NaN  
25%     7.000000e+00          NaN                   NaN  
50%     1.800000e+01          NaN                   NaN  
75%     2.800000e+01          NaN                   NaN  
max     2.520000e+02          NaN                   NaN  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; volumen_ask&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>26/09/2022    E
26/09/2022    E
26/09/2022    E
26/09/2022    E
26/09/2022    E
             ..
26/09/2022    E
26/09/2022    E
26/09/2022    E
26/09/2022    E
26/09/2022    E
Name:  volumen_ask, Length: 1223313, dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="dataframe-analysis">
<h2>DataFrame Analysis<a class="headerlink" href="#dataframe-analysis" title="Link to this heading">#</a></h2>
<section id="number-of-rows-1-223-313">
<h3><strong>Number of Rows:</strong> 1,223,313<a class="headerlink" href="#number-of-rows-1-223-313" title="Link to this heading">#</a></h3>
</section>
<section id="columns">
<h3><strong>Columns:</strong><a class="headerlink" href="#columns" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>‘fecha’</strong>: Column corresponding to specific timestamps (e.g., 05:14:18.132000000).</p></li>
<li><p><strong>hora_exacta</strong>: Exact time with nanosecond precision for the EUR/USD currency.</p></li>
<li><p><strong>precio_bid</strong>: Bid price with an average of 0.9687 and a low standard deviation, indicating a concentration of prices.</p></li>
<li><p><strong>volumen_bid</strong>: Volume associated with the bid price (minimum 1, maximum 489).</p></li>
<li><p><strong>precio_ask</strong>: Ask price with an average of 18.39 (minimum 1, maximum 252).</p></li>
<li><p><strong>volumen_ask</strong>: Column with a single value (‘E’), likely indicating an error or missing data.</p></li>
<li><p><strong>instrumento_EUR/USD</strong>: Empty column.</p></li>
</ul>
</section>
</section>
<section id="date-conversion">
<h2>Date Conversion<a class="headerlink" href="#date-conversion" title="Link to this heading">#</a></h2>
<p>To create frequency plots using the dates in the EUR/USD dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fechac&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;hora&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;INTERVALO_HORAS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;hora&#39;</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;INTERVALO_HORAS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;INTERVALO_HORAS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">:00 - </span><span class="si">{</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">:00&quot;</span><span class="p">)</span>

<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fechac&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ipython-input-50-51b35664edf7&gt;:2: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  dftra[&#39;hora&#39;] = pd.to_datetime(dftra[&#39;fecha&#39;]).dt.hour
</pre></div>
</div>
</div>
</div>
<section id="hourly-interval-analysis">
<h3>Hourly Interval Analysis<a class="headerlink" href="#hourly-interval-analysis" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frecuencia_transacciones_intervalos</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;INTERVALO_HORAS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

<span class="c1">#Graficar la frecuencia de transacciones por intervalos de 2 horas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">frecuencia_transacciones_intervalos</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgreen&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frecuencia de Transacciones por Intervalos de 2 Horas&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Intervalo de Hora&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/77f515394cf17ec47a2d5fc9ac3b595b29b0b91000c71a446993b08893cfa812.png" src="_images/77f515394cf17ec47a2d5fc9ac3b595b29b0b91000c71a446993b08893cfa812.png" />
</div>
</div>
<p>We observe that the frequency of data in the DataFrame is distributed as shown in the graph. It can be seen that the highest number of records were taken between 06:00 and 12:00 hours, while the period with the fewest records was between 16:00 and 24:00 hours.</p>
</section>
<section id="exact-time-analysis">
<h3>Exact Time Analysis<a class="headerlink" href="#exact-time-analysis" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Graficar la distribución de los milisegundos</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; hora_exacta&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgreen&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span> <span class="c1"># Use line_kws to change the color of the KDE line</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de la Hora Exacta en Nanosegundos&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Milisegundos&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 1000x600 with 0 Axes&gt;
</pre></div>
</div>
<img alt="_images/e40beaf77030fccd349c7ece432f49e9352cbfb6a3ad61e0bacf6a7b5c659427.png" src="_images/e40beaf77030fccd349c7ece432f49e9352cbfb6a3ad61e0bacf6a7b5c659427.png" />
</div>
</div>
<p>This graph presents the frequency distribution with respect to the exact time given in nanoseconds. A peak can be observed between 0.970 and 0.972, where the highest concentration of data occurs. Additionally, the distribution appears to be almost normal.</p>
</section>
<section id="bid-price-analysis">
<h3>Bid Price Analysis<a class="headerlink" href="#bid-price-analysis" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Histograma para precio_bid</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightblue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de precio_bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6fa39cd25f8de6479939803d137aa9bfd9f15e940f4796876190154f422c4ee5.png" src="_images/6fa39cd25f8de6479939803d137aa9bfd9f15e940f4796876190154f422c4ee5.png" />
</div>
</div>
<p>Here, we can observe the distribution of the bid price and the concentration of data with respect to the price. A higher concentration is seen at lower prices, followed by another, less pronounced, concentration around the 36-40 range. As the price increases, the frequency decreases significantly.</p>
</section>
<section id="ask-price-analysis">
<h3>Ask Price Analysis<a class="headerlink" href="#ask-price-analysis" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Histograma para precio_ask</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; precio_ask&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightcoral&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de precio_ask&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Precio Ask&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/dee7182acb44d289cde9609c648a2da2250647cc3d4a631a75d8b0637ecf48fb.png" src="_images/dee7182acb44d289cde9609c648a2da2250647cc3d4a631a75d8b0637ecf48fb.png" />
</div>
</div>
<p>We observe a behavior almost identical to that of the bid price. Initially, there is the highest frequency, followed by a second significant peak between 34 and 38.</p>
</section>
<section id="bid-volume-analysis">
<h3>Bid Volume Analysis<a class="headerlink" href="#bid-volume-analysis" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Histograma para volumen_bid</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; volumen_bid&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de volumen_bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Volumen Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 1000x600 with 0 Axes&gt;
</pre></div>
</div>
<img alt="_images/ff37f805a7eaf38dead04e4e7e0c6f2e124085b04f34bd5b69a4b2cd2ef490e7.png" src="_images/ff37f805a7eaf38dead04e4e7e0c6f2e124085b04f34bd5b69a4b2cd2ef490e7.png" />
</div>
</div>
<p>In this graph, we observe a distribution that appears almost normal, with a peak between 0.970 and 0.972. On both sides of the peak, there is a progressive decrease.</p>
</section>
</section>
<section id="na-s">
<h2>NA’S<a class="headerlink" href="#na-s" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_na</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total NA : </span><span class="si">{</span><span class="n">total_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total NA en el DataFrame: 1223313
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fecha</th>
      <td>0</td>
    </tr>
    <tr>
      <th>hora_exacta</th>
      <td>0</td>
    </tr>
    <tr>
      <th>precio_bid</th>
      <td>0</td>
    </tr>
    <tr>
      <th>volumen_bid</th>
      <td>0</td>
    </tr>
    <tr>
      <th>precio_ask</th>
      <td>0</td>
    </tr>
    <tr>
      <th>volumen_ask</th>
      <td>0</td>
    </tr>
    <tr>
      <th>instrumento_EUR/USD</th>
      <td>1223313</td>
    </tr>
    <tr>
      <th>fechac</th>
      <td>0</td>
    </tr>
    <tr>
      <th>hora</th>
      <td>0</td>
    </tr>
    <tr>
      <th>INTERVALO_HORAS</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div><br><label><b>dtype:</b> int64</label></div></div>
</div>
</section>
<section id="correlation">
<h2>Correlation<a class="headerlink" href="#correlation" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; volumen_ask&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39; volumen_ask&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_numeric</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[[</span><span class="s1">&#39; hora_exacta&#39;</span><span class="p">,</span> <span class="s1">&#39;precio_bid&#39;</span><span class="p">,</span> <span class="s1">&#39; volumen_bid&#39;</span><span class="p">,</span> <span class="s1">&#39; precio_ask&#39;</span><span class="p">]]</span>

<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">df_numeric</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="c1"># Graficar el mapa de calor de correlaciones</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mapa de Calor de Correlaciones&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b27ea4e7ce112390974e59905328d7d33facecef0a9625e417134751e385e4ea.png" src="_images/b27ea4e7ce112390974e59905328d7d33facecef0a9625e417134751e385e4ea.png" />
</div>
</div>
<p>We observe a high correlation between <code class="docutils literal notranslate"><span class="pre">volumen_bid</span></code> and <code class="docutils literal notranslate"><span class="pre">hora_exacta</span></code>, as well as a strong correlation among other variables in the DataFrame. Additionally, a negative correlation of -0.50 is highlighted between <code class="docutils literal notranslate"><span class="pre">precio_bid</span></code> and <code class="docutils literal notranslate"><span class="pre">precio_ask</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;fechac&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convertir columnas a numéricas</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="time-series-analysis-of-precio-bid">
<h3>Time Series Analysis of “precio_bid”<a class="headerlink" href="#time-series-analysis-of-precio-bid" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">)})</span>

<span class="c1"># Graficar la serie precio_bid</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Series de Tiempo - Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Valores&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Índice&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/889da340b6bbed30a079304cee0e394811fb5316b302b6e5f61b36a87e87d42a.png" src="_images/889da340b6bbed30a079304cee0e394811fb5316b302b6e5f61b36a87e87d42a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">)})</span>

<span class="c1"># Cálculo de medias y varianzas para las primeras y las siguientes 100 observaciones</span>
<span class="n">Mean1</span><span class="p">,</span> <span class="n">Mean2</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">100</span><span class="p">:]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">Var1</span><span class="p">,</span> <span class="n">Var2</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="o">.</span><span class="n">var</span><span class="p">(),</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">100</span><span class="p">:]</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Precio Bid - Mean1 = </span><span class="si">{</span><span class="n">Mean1</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">, Mean2 = </span><span class="si">{</span><span class="n">Mean2</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Precio Bid - Variance1 = </span><span class="si">{</span><span class="n">Var1</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">, Variance2 = </span><span class="si">{</span><span class="n">Var2</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Serie Original - Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Índice&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Precio Bid - Mean1 = 8.68, Mean2 = 18.63
Precio Bid - Variance1 = 36.87, Variance2 = 145.65
</pre></div>
</div>
<img alt="_images/b08ceedac21351f5b6cc79d295da5ffa058e1b5fa4b4e01bbccfda34e6434319.png" src="_images/b08ceedac21351f5b6cc79d295da5ffa058e1b5fa4b4e01bbccfda34e6434319.png" />
</div>
</div>
<p>The time series shows a behavior with some minor peaks throughout the day. However, a noticeable peak can be seen in the time interval between 13:05:10 and 22:30:01. This pattern can be observed in both the previous and current graphs.</p>
<p>Additionally, an analysis comparing the mean of the first 100 observations to the next 100 was conducted to evaluate whether the time series is stationary. Based on the results, it appears that the series does not exhibit clear seasonality.</p>
</section>
</section>
<section id="q-q-plot">
<h2>Q-Q plot<a class="headerlink" href="#q-q-plot" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear el gráfico Q-Q para la serie &#39;precio_bid&#39;</span>
<span class="n">qqplot</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s2">&quot;precio_bid&quot;</span><span class="p">],</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gráfico Q-Q de precio_bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/cded741c4e8d0f4564af43ecbd064ee5e54ed2ced8de3a086d659bb6d262f129.png" src="_images/cded741c4e8d0f4564af43ecbd064ee5e54ed2ced8de3a086d659bb6d262f129.png" />
</div>
</div>
<p>The graph shows an almost normal distribution. However, at the beginning, there is a slight deviation from the normal line. Significant deviations are present at the end, which coincides with the peaks observed in the time series. This suggests that the distribution is likely not completely normal.</p>
</section>
<section id="kolmogorov-smirnov-ks-test">
<h2>Kolmogorov-Smirnov (KS) Test<a class="headerlink" href="#kolmogorov-smirnov-ks-test" title="Link to this heading">#</a></h2>
<p><strong>Hypothesis Statement:</strong></p>
<ul class="simple">
<li><p><strong>Null Hypothesis (H0)</strong>: The data series follows a normal distribution.</p></li>
<li><p><strong>Alternative Hypothesis (H1)</strong>: The data series does not follow a normal distribution.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kstest</span>

<span class="c1"># Kolmogorov-Smirnov</span>
<span class="n">ks_stat</span><span class="p">,</span> <span class="n">ks_p_value</span> <span class="o">=</span> <span class="n">kstest</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s2">&quot;precio_bid&quot;</span><span class="p">],</span> <span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Imprimir los resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Estadístico de KS: </span><span class="si">{</span><span class="n">ks_stat</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Valor p: </span><span class="si">{</span><span class="n">ks_p_value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Interpretación</span>
<span class="k">if</span> <span class="n">ks_p_value</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;La serie no sigue una distribución normal (rechazamos la hipótesis nula)&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;La serie sigue una distribución normal (no rechazamos la hipótesis nula)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estadístico de KS: 0.9462561648867273
Valor p: 0.0
La serie no sigue una distribución normal (rechazamos la hipótesis nula)
</pre></div>
</div>
</div>
</div>
<p>Given that the p-value is 0.0, we reject the null hypothesis, concluding that the <strong>precio_bid</strong> time series does not follow a normal distribution. This is consistent with the observations made in the Q-Q plot, where significant deviations from normality are noticeable, particularly in the extreme values.</p>
</section>
<section id="reference-to-the-case-study">
<h2>Reference to the Case Study<a class="headerlink" href="#reference-to-the-case-study" title="Link to this heading">#</a></h2>
<p>In Professor <strong>Lihki Rubio’s</strong> paper, a case is presented using the technique of <strong>Time Series Data Resampling</strong>. This technique is demonstrated with a time series of chemical concentrations taken every two hours between January 1, 1975, and January 17, 1975.</p>
<p>This case will serve as a guide for developing the analysis of our own time series, which contains a very large amount of data. Resampling will allow us to simplify the dataset while preserving the characteristics of the series.</p>
<p><strong>Credits to the paper</strong>: <em>Introduction to Time Series — Time Series Analysis and Prediction</em>.</p>
</section>
<section id="resampling">
<h2>Resampling<a class="headerlink" href="#resampling" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">])</span>
<span class="n">dftra</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">)</span>
<span class="n">non_numeric_cols</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">non_numeric_cols</span><span class="p">:</span>
    <span class="n">dftra</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="n">df5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">dfhora</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">plot_resampled_data</span><span class="p">(</span><span class="n">df_resampled</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">df_resampled</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">df5min</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada 5 minutos - Media Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">df30min</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada 30 minutos - Media Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">dfhora</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada hora - Media Precio Bid&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ipython-input-66-b83bb35189f9&gt;:1: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  dftra[&#39;fecha&#39;] = pd.to_datetime(dftra[&#39;fecha&#39;])
</pre></div>
</div>
<img alt="_images/44774e025c0f519d3b24b521cf6221ee6a12a7b17933b5c5d1ed7e81848e56c1.png" src="_images/44774e025c0f519d3b24b521cf6221ee6a12a7b17933b5c5d1ed7e81848e56c1.png" />
<img alt="_images/2fd9912e9a82152dbd139716f05fc1ec07cb8dd02431f65549960a5d8d4050ad.png" src="_images/2fd9912e9a82152dbd139716f05fc1ec07cb8dd02431f65549960a5d8d4050ad.png" />
<img alt="_images/e47509bcdb7978b8b8d2d9d4250f283de9dfaf85b6f1286ce731a98405a52b50.png" src="_images/e47509bcdb7978b8b8d2d9d4250f283de9dfaf85b6f1286ce731a98405a52b50.png" />
</div>
</div>
<p>After resampling, we observe the following time series plots at intervals of “5 minutes,” “30 minutes,” and “1 hour.” The first noticeable aspect is that as the interval increases, the series becomes smoother. Initially, the series seems to show a general trend, but over time, subtle cyclical changes begin to appear. Additionally, an interruption in the series is observed between 15:00 and 17:00, which is also reflected in the transaction frequency graph for 2-hour intervals.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_hora</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df_30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df_5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Serie resampleada por hora en azul</span>
<span class="n">df_hora</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por Hora&#39;</span><span class="p">)</span>

<span class="c1"># Serie resampleada por 30 minutos en verde</span>
<span class="n">df_30min</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por 30 Minutos&#39;</span><span class="p">)</span>

<span class="c1"># Serie resampleada por 5 minutos en rojo</span>
<span class="n">df_5min</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por 5 Minutos&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Serie Resampleada por Diferentes Frecuencias&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/83bf68907ca798203adf49b60e6725b06d749f095f7291746ad12f7f8996cc87.png" src="_images/83bf68907ca798203adf49b60e6725b06d749f095f7291746ad12f7f8996cc87.png" />
</div>
</div>
<p>In this graph, the resampling by hour, 30 minutes, and 5 minutes of the “precio_bid” time series are overlaid. Aspects previously mentioned can be observed, such as the smoothness of the series as the time interval increases, as well as the interruption in the interval between 15:00 and 17:00.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">non_numeric_cols</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">non_numeric_cols</span><span class="p">:</span>
    <span class="n">dftra</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">dftra</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="n">df5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">dfhora</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">prepare_boxplot_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">period</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;period&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">period</span>
    <span class="k">return</span> <span class="n">df</span>
<span class="n">dftra_boxplot</span> <span class="o">=</span> <span class="n">prepare_boxplot_data</span><span class="p">(</span><span class="n">dftra</span><span class="p">,</span> <span class="s1">&#39;General&#39;</span><span class="p">)</span>
<span class="n">df5min_boxplot</span> <span class="o">=</span> <span class="n">prepare_boxplot_data</span><span class="p">(</span><span class="n">df5min</span><span class="p">,</span> <span class="s1">&#39;Cada 5 Minutos&#39;</span><span class="p">)</span>
<span class="n">df30min_boxplot</span> <span class="o">=</span> <span class="n">prepare_boxplot_data</span><span class="p">(</span><span class="n">df30min</span><span class="p">,</span> <span class="s1">&#39;Cada 30 Minutos&#39;</span><span class="p">)</span>
<span class="n">dfhora_boxplot</span> <span class="o">=</span> <span class="n">prepare_boxplot_data</span><span class="p">(</span><span class="n">dfhora</span><span class="p">,</span> <span class="s1">&#39;Cada Hora&#39;</span><span class="p">)</span>
<span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dftra_boxplot</span><span class="p">,</span> <span class="n">df5min_boxplot</span><span class="p">,</span> <span class="n">df30min_boxplot</span><span class="p">,</span> <span class="n">dfhora_boxplot</span><span class="p">])</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">dftra_boxplot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot - General&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df5min_boxplot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot - Cada 5 Minutos&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df30min_boxplot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot - Cada 30 Minutos&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">dfhora_boxplot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot - Cada Hora&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2e1ab3765fd1cba93ef2514cf5418927bc50fae8cfab60b80308f03bd5c2a5d6.png" src="_images/2e1ab3765fd1cba93ef2514cf5418927bc50fae8cfab60b80308f03bd5c2a5d6.png" />
</div>
</div>
<p>In the graphs, the distribution of <strong>precio_bid</strong> is shown across different time intervals: without resampling (general), every 5 minutes, every 30 minutes, and every 1 hour.</p>
<ul class="simple">
<li><p><strong>General</strong>: There are many high outliers, indicating transactions with very elevated bid prices. Most of the data is concentrated in lower prices, with a highly skewed distribution.</p></li>
<li><p><strong>Every 5 Minutes</strong>: The distribution is more detailed, with less dispersion and some lower outliers. The main concentration is between 15 and 20 units.</p></li>
<li><p><strong>Every 30 Minutes</strong>: The distribution is similar to that of 5 minutes, but smoother with fewer outliers. This shows that as the resampling interval increases, outliers have less impact on the distribution.</p></li>
<li><p><strong>Every 1 Hour</strong>: The bid price distribution is even smoother, with fewer visible outliers. The interquartile range is similar to the 30-minute boxplot, suggesting stability in the median as the interval increases.</p></li>
</ul>
</section>
<section id="analysis-of-autocorrelation-and-partial-autocorrelation-graphs">
<h2>Analysis of Autocorrelation and Partial Autocorrelation Graphs<a class="headerlink" href="#analysis-of-autocorrelation-and-partial-autocorrelation-graphs" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># Número de lags</span>
<span class="n">nlag</span> <span class="o">=</span> <span class="mi">60</span>

<span class="c1"># Autocorrelación y autocorrelación parcial para datos resampleados cada 5 minutos</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Autocorrelación para datos resampleados cada 5 minutos:&quot;</span><span class="p">)</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_pacf</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación parcial</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Autocorrelación para datos resampleados cada 5 minutos:
</pre></div>
</div>
<img alt="_images/8d65ebe306797334a9c64b3530559597f57ce588d820f4cf7c68ec1759d84dcc.png" src="_images/8d65ebe306797334a9c64b3530559597f57ce588d820f4cf7c68ec1759d84dcc.png" />
<img alt="_images/d7635c2bdb12abed38ce43889c5f601109d2d688c7a4c32ff1e285aba3432224.png" src="_images/d7635c2bdb12abed38ce43889c5f601109d2d688c7a4c32ff1e285aba3432224.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resamplear los datos</span>
<span class="n">df30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># Número de lags</span>
<span class="n">nlag</span> <span class="o">=</span> <span class="mi">23</span>

<span class="c1"># Autocorrelación y autocorrelación parcial para datos resampleados cada 30 minutos</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Autocorrelación para datos resampleados cada 30 minutos:&quot;</span><span class="p">)</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_pacf</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación parcial</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Autocorrelación para datos resampleados cada 30 minutos:
</pre></div>
</div>
<img alt="_images/c39b6a6eab2d6ece8a2dd81fd75f7c43767227147e599f56ca809b622009fcdb.png" src="_images/c39b6a6eab2d6ece8a2dd81fd75f7c43767227147e599f56ca809b622009fcdb.png" />
<img alt="_images/4e378037192ad415d0da817fe2ba5acace709c0092275c8d061155bb447999c8.png" src="_images/4e378037192ad415d0da817fe2ba5acace709c0092275c8d061155bb447999c8.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resamplear los datos</span>
<span class="n">dfhora</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Número de lags</span>
<span class="n">nlag</span> <span class="o">=</span> <span class="mi">11</span>

<span class="c1"># Autocorrelación y autocorrelación parcial para datos resampleados cada 1 hora</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Autocorrelación para datos resampleados cada 1 hora:&quot;</span><span class="p">)</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_pacf</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Autocorrelación parcial</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Autocorrelación para datos resampleados cada 1 hora:
</pre></div>
</div>
<img alt="_images/7328f5459f70ef0e007529392e09800abe9de9850f87bb42445dea2270b97cb8.png" src="_images/7328f5459f70ef0e007529392e09800abe9de9850f87bb42445dea2270b97cb8.png" />
<img alt="_images/1184a07b7b16db37c72689c3e2c91c7e37c47a6e62b04acd2b90e1888df86b8c.png" src="_images/1184a07b7b16db37c72689c3e2c91c7e37c47a6e62b04acd2b90e1888df86b8c.png" />
</div>
</div>
<p><strong>Definition from the previously mentioned paper:</strong></p>
<p>“Autocorrelation reflects the degree of linear dependence between the values of a time series at a specific index and the values of the time series at indices shifted by ( t-k ) or ( t+k ).”</p>
<hr class="docutils" />
<p>After reviewing these graphs, no clear seasonality is visually present in the intervals, and some data points fall outside the confidence bands. A test will be conducted to verify this observation.</p>
</section>
<section id="analytical-method-augmented-dickey-fuller-test-adf">
<h2><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong><a class="headerlink" href="#analytical-method-augmented-dickey-fuller-test-adf" title="Link to this heading">#</a></h2>
<p>The ADF test is a unit root test that statistically detects the presence of stochastic trend behavior in the time series of variables by using a hypothesis contrast.</p>
<p>In the presence of autocorrelation, it is necessary to differentiate the closing price series from Binance. Thus, the hypotheses to be tested are:</p>
<p><strong>H0: ρ = 0</strong> The series has a unit root and is not stationary.</p>
<p><strong>H1: ρ &lt; 0</strong> The series does not have a unit root and is stationary.</p>
<p>In other words, the null hypothesis is the presence of a unit root or non-stationarity, while the alternative hypothesis suggests stationarity of the data.</p>
<p><span class="math notranslate nohighlight">\(credits \text{ } to \text{ } Professor: \text{ } Keyla \text{ } Alba \text{ } for \text{ } the \text{ } information\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada a 5 minutos</span>
<span class="n">adf_result_5min</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample 5 Minutos&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_5min</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_5min</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample 5 Minutos
ADF Statistic: -2.416044
p-value: 0.137259
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada a 30 minutos</span>
<span class="n">adf_result_30min</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample 30 Minutos&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_30min</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_30min</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample 30 Minutos
ADF Statistic: -2.193802
p-value: 0.208503
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada por hora</span>
<span class="n">adf_result_hora</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample Por Hora&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_hora</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_hora</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample Por Hora
ADF Statistic: -2.251910
p-value: 0.187947
</pre></div>
</div>
</div>
</div>
<p>The results obtained are as follows:</p>
<ul class="simple">
<li><p><strong>Resample by Hour:</strong></p>
<ul>
<li><p>ADF Statistic: -2.251910</p></li>
<li><p>p-value: 0.187947</p></li>
</ul>
</li>
<li><p><strong>Resample 30 Minutes:</strong></p>
<ul>
<li><p>ADF Statistic: -2.193802</p></li>
<li><p>p-value: 0.208503</p></li>
</ul>
</li>
<li><p><strong>Resample 5 Minutes:</strong></p>
<ul>
<li><p>ADF Statistic: -2.416044</p></li>
<li><p>p-value: 0.137259</p></li>
</ul>
</li>
</ul>
<p>In all cases, the p-value is higher than the 0.05 significance level, suggesting that we cannot reject the null hypothesis. This indicates that the time series does not show sufficient evidence to be considered stationary and may contain a unit root.</p>
</section>
<section id="differencing-application">
<h2>Differencing Application<a class="headerlink" href="#differencing-application" title="Link to this heading">#</a></h2>
<p>Due to the previous results, we will apply the differencing method to transform a non-stationary series into a stationary one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Serie Original&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Serie Diferenciada&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Diferencia de Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/979786e4a2982ff3b51b8e3f29e4d3c77c57e8a6aa43fec3a53afb66d7426f81.png" src="_images/979786e4a2982ff3b51b8e3f29e4d3c77c57e8a6aa43fec3a53afb66d7426f81.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">dfhora</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Graficamos las series resampleadas</span>
<span class="k">def</span> <span class="nf">plot_resampled_data</span><span class="p">(</span><span class="n">df_resampled</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">df_resampled</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">df5min</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada 5 minutos - Media Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">df30min</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada 30 minutos - Media Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plot_resampled_data</span><span class="p">(</span><span class="n">dfhora</span><span class="p">,</span> <span class="s1">&#39;Resampleo cada hora - Media Precio Bid&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4b1ab8c0a4931d7758646be159ecc24bbcf31ed567277848e6ff461a881d5f54.png" src="_images/4b1ab8c0a4931d7758646be159ecc24bbcf31ed567277848e6ff461a881d5f54.png" />
<img alt="_images/c169115c607025a2afea71c971414fee4e7f09cbe7ed3960035eac3ff35d5095.png" src="_images/c169115c607025a2afea71c971414fee4e7f09cbe7ed3960035eac3ff35d5095.png" />
<img alt="_images/12ae3233942a8dd894b9852fdef50db2401ef2a5528ab4787202851d4ecfec95.png" src="_images/12ae3233942a8dd894b9852fdef50db2401ef2a5528ab4787202851d4ecfec95.png" />
</div>
</div>
<p>After applying the differencing method, we generated these graphs to observe whether our series is now stationary. Visually, it appears that only one differencing step was necessary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Paso 1: Resamplear la serie temporal a diferentes frecuencias</span>
<span class="n">df_hora</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>  <span class="c1"># Resampleo por hora</span>
<span class="n">df_30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>  <span class="c1"># Resampleo cada 30 minutos</span>
<span class="n">df_5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>  <span class="c1"># Resampleo cada 5 minutos</span>

<span class="c1"># Paso 2: Graficar la serie resampleada por diferentes frecuencias</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Graficar la serie resampleada por hora en azul</span>
<span class="n">df_hora</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por Hora&#39;</span><span class="p">)</span>

<span class="c1"># Graficar la serie resampleada por 30 minutos en verde</span>
<span class="n">df_30min</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por 30 Minutos&#39;</span><span class="p">)</span>

<span class="c1"># Graficar la serie resampleada por 5 minutos en rojo</span>
<span class="n">df_5min</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Resample por 5 Minutos&#39;</span><span class="p">)</span>

<span class="c1"># Configurar etiquetas y título</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Serie Resampleada por Diferentes Frecuencias&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Precio Bid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/52197ab0ac32857663aeb59acfbcaf8fe4f9c2f488af55e2ad3f96b21c9b2c29.png" src="_images/52197ab0ac32857663aeb59acfbcaf8fe4f9c2f488af55e2ad3f96b21c9b2c29.png" />
</div>
</div>
<p>Here, we observe the graphs of the differenced and resampled series, with the previously mentioned characteristics, but now showing apparent visual stationarity.</p>
</section>
<section id="autocorrelation-and-partial-autocorrelation">
<h2>Autocorrelation and Partial Autocorrelation<a class="headerlink" href="#autocorrelation-and-partial-autocorrelation" title="Link to this heading">#</a></h2>
<p>After performing the differencing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df5min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df30min</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">dfhora</span> <span class="o">=</span> <span class="n">dftra</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">nlag_5min</span> <span class="o">=</span> <span class="mi">70</span>
<span class="n">nlag_30min</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">nlag_hora</span> <span class="o">=</span> <span class="mi">11</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>

<span class="c1"># Gráficas para resampleo cada 5 minutos</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag_5min</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;ACF - Resampleo 5 Minutos&quot;</span><span class="p">)</span>
<span class="n">plot_pacf</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag_5min</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;PACF - Resampleo 5 Minutos&quot;</span><span class="p">)</span>

<span class="c1"># Gráficas para resampleo cada 30 minutos</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;ACF - Resampleo 30 Minutos&quot;</span><span class="p">)</span>
<span class="n">plot_pacf</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag_30min</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;PACF - Resampleo 30 Minutos&quot;</span><span class="p">)</span>

<span class="c1"># Gráficas para resampleo cada 1 hora</span>
<span class="n">plot_acf</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;ACF - Resampleo 1 Hora&quot;</span><span class="p">)</span>
<span class="n">plot_pacf</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">lags</span><span class="o">=</span><span class="n">nlag_hora</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;PACF - Resampleo 1 Hora&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4817ab45bacc2532cb2b6cad99d7fb6fe2249cc925a6265dc50da8cd6bf48726.png" src="_images/4817ab45bacc2532cb2b6cad99d7fb6fe2249cc925a6265dc50da8cd6bf48726.png" />
</div>
</div>
<p>After reviewing the autocorrelation and partial autocorrelation, we notice a visual change compared to the previous analysis, as seasonality is now evident.</p>
</section>
<section id="id1">
<h2><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong><a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>After applying differencing.</p>
<p><strong>Hypothesis Statement:</strong></p>
<ul class="simple">
<li><p><strong>H0: ρ = 0</strong> The series has a unit root and is not stationary.</p></li>
<li><p><strong>H1: ρ &lt; 0</strong> The series does not have a unit root and is stationary.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada a 5 minutos</span>
<span class="n">adf_result_5min</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">df5min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample 5 Minutos&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_5min</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_5min</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample 5 Minutos
ADF Statistic: -5.684171
p-value: 0.000001
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada a 30 minutos</span>
<span class="n">adf_result_30min</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">df30min</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample 30 Minutos&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_30min</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_30min</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample 30 Minutos
ADF Statistic: -12.487952
p-value: 0.000000
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba ADF para la serie resampleada por hora</span>
<span class="n">adf_result_hora</span> <span class="o">=</span> <span class="n">adfuller</span><span class="p">(</span><span class="n">dfhora</span><span class="p">[</span><span class="s1">&#39;precio_bid_diff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Resample Por Hora&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ADF Statistic: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_hora</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;p-value: </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">adf_result_hora</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resample Por Hora
ADF Statistic: -1.384520
p-value: 0.589675
</pre></div>
</div>
</div>
</div>
<p>The results obtained are as follows:</p>
<ul class="simple">
<li><p><strong>Resample 5 Minutes:</strong></p>
<ul>
<li><p>ADF Statistic: -5.684171</p></li>
<li><p>p-value: 0.000001</p></li>
</ul>
</li>
<li><p><strong>Resample 30 Minutes:</strong></p>
<ul>
<li><p>ADF Statistic: -12.487952</p></li>
<li><p>p-value: 0.000000</p></li>
</ul>
</li>
<li><p><strong>Resample by Hour:</strong></p>
<ul>
<li><p>ADF Statistic: -1.384520</p></li>
<li><p>p-value: 0.589675</p></li>
</ul>
</li>
<li><p><strong>Resample 5 Minutes</strong> and <strong>Resample 30 Minutes</strong>:
In both cases, the p-values are significantly lower than 0.05, allowing us to reject the null hypothesis of a unit root. This indicates that the differenced time series is stationary at these time intervals. The ADF statistics are negative and large in magnitude, further supporting the evidence that the series do not have a unit root.</p></li>
<li><p><strong>Resample by Hour</strong>:
In this case, the p-value is greater than 0.05, suggesting that we cannot reject the null hypothesis. This indicates that the differenced time series is not stationary when resampled at hourly intervals.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to the Machine Learning Project</p>
      </div>
    </a>
    <a class="right-next"
       href="Modelos_PF.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Usual Models</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective-of-the-eda">Objective of the EDA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-the-trading-dataframe">Description of the Trading DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-analysis">DataFrame Analysis</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#number-of-rows-1-223-313"><strong>Number of Rows:</strong> 1,223,313</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#columns"><strong>Columns:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#date-conversion">Date Conversion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hourly-interval-analysis">Hourly Interval Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exact-time-analysis">Exact Time Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bid-price-analysis">Bid Price Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ask-price-analysis">Ask Price Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bid-volume-analysis">Bid Volume Analysis</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#na-s">NA’S</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correlation">Correlation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-analysis-of-precio-bid">Time Series Analysis of “precio_bid”</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#q-q-plot">Q-Q plot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolmogorov-smirnov-ks-test">Kolmogorov-Smirnov (KS) Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-to-the-case-study">Reference to the Case Study</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling">Resampling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-autocorrelation-and-partial-autocorrelation-graphs">Analysis of Autocorrelation and Partial Autocorrelation Graphs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analytical-method-augmented-dickey-fuller-test-adf"><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#differencing-application">Differencing Application</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#autocorrelation-and-partial-autocorrelation">Autocorrelation and Partial Autocorrelation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>Analytical Method (Augmented Dickey-Fuller Test - ADF)</strong></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lorenzo David Gutierrez Vesga
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>